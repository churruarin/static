<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mapbox-gl/1.0.0/mapbox-gl.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mapbox-gl/1.0.0/mapbox-gl.css" rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<div id='map'></div>
<script>

    // zoom: 8 // starting zoom
    //"tiles": ["/tiles/{z}-{x}-{y}.pbf"],

var map = new mapboxgl.Map({
    container: 'map', // container id
    style: "/styles/churruarin.style.json",
    center: [-60.495165, -31.746272], // starting position
    bearing: 10,
    zoom: 14 // starting zoom
});
map.on('load', function () {
 
 var layers = map.getStyle().layers;
 // Find the index of the first symbol layer in the map style
 var firstSymbolId;
 for (var i = 0; i < layers.length; i++) {
 if (layers[i].id === 'road-label') {
 firstSymbolId = layers[i].id;
 break;
 }
 }
 map.addLayer({
 'id': 'territorios',
 'type': 'line',
 'source': {
 'type': 'geojson',
 'data': '/geojson/territorios.geojson'
 },
 "layout": {"line-cap": "round", "line-join": "round"},
            "paint": {
                "line-width": [
                    "interpolate",
                    ["linear"],
                    ["zoom"],
                    10,
                    1,
                    22,
                    15
                ],
                "line-color": "#295494",
                "line-dasharray": [
                    "step",
                    ["zoom"],
                    ["literal", [1, 0]],
                    14,
                    ["literal", [0.5, 1.5]]
                ],
                "line-offset": 0,
                "line-blur": 1,
                "line-opacity": [
                    "interpolate",
                    ["linear"],
                    ["zoom"],
                    0,
                    1,
                    22,
                    1
                ]
            }
 }, firstSymbolId);
 map.addLayer({
 'id': 'territorios-labels',
 'type': 'symbol',
 'source': {
 'type': 'geojson',
 'data': '/geojson/territorios.geojson'
 },
 "layout": {
                "text-field": ["to-string", ["get", "territorio"]],
                "text-font": ["DIN_Offc_Pro_Bold"],
                "text-size": [
                    "interpolate",
                    ["linear"],
                    ["zoom"],
                    12.9,
                    0,
                    13,
                    10,
                    22,
                    90
                ],
                "symbol-avoid-edges": true,
                "text-padding": 10,
                "text-allow-overlap": true
            },
            "paint": {
                "text-halo-color": "hsla(0, 0%, 100%, 0.74)",
                "text-halo-width": 4,
                "text-halo-blur": 1,
                "text-color": "#1a3660"
            }
 }, firstSymbolId);
 
 });
</script>

</body>
</html>

